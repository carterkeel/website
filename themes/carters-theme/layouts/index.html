{{ define "main" }}
<main>

  <!-- Make contact box its own partial and split css into multiple files. Possibly make section titles configurable in yaml, make search placeholeder configurable. Optimze for dark reader-->

  <!-- HERO -->
  <section>
    <div class="hero-content">
      {{ with .Site.Params.landing.pfp }}
        <img src="{{ . }}" alt="Profile Picture" class="pfp">
      {{ end }}
      <div class="hero-text">
        <h1>{{ .Site.Params.landing.name }}</h1>
        <p>{{ delimit .Site.Params.landing.roles " | " }}</p>

        <!-- PARTNERS SECTION -->
        {{ with .Site.Params.landing.partners }}
        {{ range . }}
        <p class="partner-link">
          <a href="{{ .url }}" title="Partnered with {{ .name }}">
            <img src="{{ .image }}" alt="{{ .name }}" class="partner-logo">
            Partnered with {{ .name }}
          </a>
        </p>
        {{ end }}
        {{ end }}

        <!-- LINKS -->
        {{ with .Site.Params.landing.links }}
        <ul class="social-links">
          {{ range . }}
            <li>
              <a href="{{ .url }}" title="{{ .label }}">
                <img src="{{ .icon }}" alt="{{ .label }}" class="iconsColor">
              </a>
            </li>
          {{ end }}
        </ul>
        {{ end }}

        <!-- ABOUT ME LINK -->
        {{ with .Site.Params.landing.aboutMe }}
        <p class="about-me-link">
          <a href="{{ .url }}">{{ .label }}</a>
        </p>
        {{ end }}
      </div>
    </div>
  </section>

  <!-- ABOUT / SKILLS -->
  <section>
    <h2 class="mainPage"><span>About</span></h2>
    <p>{{ .Site.Params.about.intro }}</p>

    {{ range .Site.Params.about.sections }}
      <div>
        <h3>{{ .title }}</h3>
        <p>{{ .description }}</p>

        <ul>
          {{ range .skills }}
            <li>{{ . }}</li>
          {{ end }}
        </ul>
      </div>
    {{ end }}
  </section>

    <!-- FEATURED PROJECTS -->
  {{ with .Site.Params.landing.featuredProjects }}
  <section>
    <h2 class="mainPage"><span>Projects</span></h2>

    {{ range . }}
      {{ $slug := . }}
      {{ with site.GetPage (printf "projects/%s" $slug) }}
        <a href="{{ .RelPermalink }}" class="article-link">
          <article>

            {{ with .Params.thumbnail }}
              <img src="{{ . }}" alt="{{ $.Title }} thumbnail">
            {{ end }}

            <div class="article-content">
              <h3>
                {{ .Title }}
              </h3>
              <p><small>{{ .Date.Format "January 2, 2006" }}</small></p>

              <p>{{ .Summary }}</p>

              {{ with .Params.tags }}
                <ul>
                  {{ range . }}
                    <li>{{ . }}</li>
                  {{ end }}
                </ul>
              {{ end }}
            </div>

          </article>
        </a>
      {{ end }}
    {{ end }}

  </section>
  {{ end }}

<!-- EXPERIENCE -->
{{ with .Site.Params.experience }}
<section>
  <h2 class="mainPage"><span>Experience</span></h2>

  {{ with .employment }}
  <div>
    <h3>Employment</h3>
    {{ range . }}
      <article class="experience-card">
        <div class="experience-info">
          <h4>{{ .company }}</h4>
          <p><strong>{{ .location }}</strong></p>
        </div>
        <p class="experience-date">{{ .startDate }} â€“ {{ .endDate }}</p>
      </article>
    {{ end }}
  </div>
  {{ end }}

  {{ with .education }}
  <div>
    <h3><span>Education</span></h3>
    {{ range . }}
      <article class="experience-card">
        <div class="experience-info">
          <h4>{{ .degree }}</h4>
          <p><strong>{{ .school }}</strong></p>
          <p>{{ .location }}</p>
        </div>
        <p class="experience-date">{{ if .expected }}Expected {{ .expected }}{{ else }}Completed{{ end }}</p>
      </article>
    {{ end }}
  </div>
  {{ end }}

  {{ if .resume }}
  <div class="resume-section">
    <a href="{{ .resume.url }}" class="resume-button">{{ .resume.label }}</a>
  </div>
  {{ end }}
</section>
{{ end }}

<!-- RECENT POSTS -->
<section>
  <h2 class="mainPage"><span>Recent Posts</span></h2>

  {{ $posts := where .Site.RegularPages "Section" "posts" }}
  {{ $recent := first 3 (sort $posts "Date" "desc") }}

  {{ if gt (len $recent) 0 }}
    {{ range $recent }}
      <a href="{{ .RelPermalink }}" class="article-link">
        <article>

          {{ with .Params.thumbnail }}
            <img src="{{ . }}" alt="{{ $.Title }} thumbnail">
          {{ end }}

          <div class="article-content">
            <h3>
              {{ .Title }}
            </h3>
            <p><small>{{ .Date.Format "January 2, 2006" }}</small></p>

            <p>{{ .Summary }}</p>

            {{ with .Params.tags }}
              <ul>
                {{ range . }}
                  <li>{{ . }}</li>
                {{ end }}
              </ul>
            {{ end }}
          </div>

        </article>
      </a>
    {{ end }}
  {{ else }}
    <p>No posts yet.</p>
  {{ end }}
</section>


<!-- CONTACT -->
{{ with .Site.Params.contact }}
<section class="contactMeContainer" id="{{ .id }}">

  <h2 class="mainPage"><span>{{ .title }}</span></h2>

  {{ with .subtitle }}
    <p class="section-subtitle">{{ . }}</p>
  {{ end }}

  <div class="container-readable">
    <form
      class="contact-form"
      action="{{ .form.action }}"
      method="{{ .form.method }}"
    >

      {{ range .form.fields }}
        {{ if eq .type "textarea" }}
          <textarea
            name="{{ .name }}"
            placeholder="{{ .placeholder }}"
            rows="{{ .rows | default 4 }}"
            {{ if .required }}required{{ end }}
          ></textarea>
        {{ else }}
          <input
            type="{{ .type }}"
            name="{{ .name }}"
            placeholder="{{ .placeholder }}"
            {{ if .required }}required{{ end }}
          />
        {{ end }}
      {{ end }}

      <button type="submit" class="button button-primary">
        {{ .form.submit.label }}
      </button>
    </form>
  </div>

</section>
{{ end }}


</main>
{{ end }}
